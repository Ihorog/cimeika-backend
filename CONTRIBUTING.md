# –ü–æ—Å—ñ–±–Ω–∏–∫ –∑ —É—á–∞—Å—Ç—ñ –≤ –ø—Ä–æ—î–∫—Ç—ñ CIMEIKA Backend

–î—è–∫—É—î–º–æ –∑–∞ —ñ–Ω—Ç–µ—Ä–µ—Å –¥–æ –ø—Ä–æ—î–∫—Ç—É CIMEIKA Backend! –ú–∏ —Ä–∞–¥—ñ –±—É–¥—å-—è–∫–∏–º –≤–ΩÔøΩÔøΩ—Å–∫–∞–º.

## –ü—Ä–æ –ø—Ä–æ—î–∫—Ç

CIMEIKA Backend - —Ü–µ —Å–∏—Å—Ç–µ–º–∞ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏—Ö –∞–≥–µ–Ω—Ç—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ Cloudflare Workers. –ü—Ä–æ—î–∫—Ç —î —á–∞—Å—Ç–∏–Ω–æ—é –µ–∫–æ—Å–∏—Å—Ç–µ–º–∏ Cimeika.

### –†–µ—Å—É—Ä—Å–∏ –ø—Ä–æ—î–∫—Ç—É
- üåê **–í–µ–±—Å–∞–π—Ç:** [cimeika.com.ua](https://cimeika.com.ua)
- üíª **GitHub:** [@Ihorog](https://github.com/Ihorog)
- ü§ó **HuggingFace:** [Cimeika API](https://huggingface.co/spaces/Ihorog/cimeika-api)
- üìß **–ö–æ–Ω—Ç–∞–∫—Ç–∏:** cimeika.com.ua@gmail.com

## –Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ –≤–Ω–µ—Å–æ–∫

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —Ä–æ–∑—Ä–æ–±–∫–∏

```bash
# –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
git clone https://github.com/Ihorog/cimeika-backend.git
cd cimeika-backend

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
npm install

# –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª .env –∑ –ø—Ä–∏–∫–ª–∞–¥—É
cp .env.example .env
```

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ Cloudflare

```bash
# KV Namespaces
wrangler kv:namespace create CONFIG
wrangler kv:namespace create AUTH_TOKENS

# D1 Database
wrangler d1 create cimeika

# R2 Bucket
wrangler r2 bucket create cimeika-files
```

### 3. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

```bash
# –í–∏–∫–æ–Ω–∞—Ç–∏ SQL —Å—Ö–µ–º—É
wrangler d1 execute cimeika --file=src/lib/db-schema.sql
```

### 4. –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ
npm run dev

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–∏–ø–∏
npm run types

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏
npm test
```

## –ü—Ä–∞–≤–∏–ª–∞ —Ä–æ–∑—Ä–æ–±–∫–∏

### –°—Ç–∏–ª—å –∫–æ–¥—É

#### –ú–æ–≤–∞

- **–ö–æ–¥ (–∑–º—ñ–Ω–Ω—ñ, —Ñ—É–Ω–∫—Ü—ñ—ó, –∫–ª–∞—Å–∏):** English
- **UI —Ç–µ–∫—Å—Ç–∏ —Ç–∞ API –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:** –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:** –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞
- **–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ:** English (–¥–ª—è –∫–æ–¥—É), –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ (–¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó)

#### –Ü–º–µ–Ω—É–≤–∞–Ω–Ω—è

- **–§–∞–π–ª–∏:** kebab-case (`base-agent.ts`)
- **–ö–ª–∞—Å–∏:** PascalCase (`BaseAgent`)
- **–§—É–Ω–∫—Ü—ñ—ó:** camelCase (`calculateScore`)
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏:** UPPER_SNAKE_CASE (`MAX_RETRIES`)

#### TypeScript

- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ strict mode
- –£–Ω–∏–∫–∞—Ç–∏ `any` —Ç–∏–ø—ñ–≤
- –î–æ–¥–∞–≤–∞—Ç–∏ JSDoc –¥–ª—è –ø—É–±–ª—ñ—á–Ω–∏—Ö API
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –¥–ª—è –æ–±'—î–∫—Ç—ñ–≤

```typescript
/**
 * –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞–Ω –Ω–∞—Å—Ç—Ä–æ—é
 * @param mood - –ù–∞–∑–≤–∞ –Ω–∞—Å—Ç—Ä–æ—é
 * @param score - –û—Ü—ñ–Ω–∫–∞ –≤—ñ–¥ 0 –¥–æ 100
 * @returns Promise –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
 */
async function updateMood(mood: string, score: number): Promise<boolean> {
  // Implementation
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º—ñ—Ç—É

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —á—ñ—Ç–∫—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ–º—ñ—Ç—É:

```
—Ç–∏–ø: –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å

–î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å –∑–º—ñ–Ω (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)

Closes #123
```

**–¢–∏–ø–∏:**
- `feat`: –ù–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å
- `fix`: –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
- `docs`: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- `style`: –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É
- `refactor`: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- `test`: –¢–µ—Å—Ç–∏
- `chore`: –¢–µ—Ö–Ω—ñ—á–Ω—ñ –∑–º—ñ–Ω–∏

**–ü—Ä–∏–∫–ª–∞–¥–∏:**
```
feat: –¥–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –¥–ª—è podiya endpoints

fix: –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –ø–æ–º–∏–ª–∫—É –≤ nastriy mood calculation

docs: –æ–Ω–æ–≤–∏—Ç–∏ README –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º–∏
```

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

- –ü–∏—Å–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è –Ω–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ
- –¢–µ—Å—Ç–∏ –º–∞—é—Ç—å –±—É—Ç–∏ –≤ `src/tests/`
- –ù–∞–∑–≤–∞ —Ñ–∞–π–ª—ñ–≤: `*.test.ts`
- –ú—ñ–Ω—ñ–º—É–º 80% –ø–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É

```typescript
import { describe, it, expect } from 'vitest';

describe('PodiyaAgent', () => {
  it('should create event', async () => {
    // Arrange
    const event = { type: 'test', data: {} };

    // Act
    const result = await agent.createEvent(event);

    // Assert
    expect(result).toBe(true);
  });
});
```

### –ë–µ–∑–ø–µ–∫–∞

- **–ó–ê–í–ñ–î–ò** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏ –¥–ª—è SQL
- **–ù–Ü–ö–û–õ–ò** –Ω–µ –∫–æ–º—ñ—Ç–∏—Ç–∏ —Å–µ–∫—Ä–µ—Ç–∏ –∞–±–æ API –∫–ª—é—á—ñ
- **–ù–Ü–ö–û–õ–ò** –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `eval()` –∞–±–æ –¥–∏–Ω–∞–º—ñ—á–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–¥—É
- –í–∞–ª—ñ–¥—É–≤–∞—Ç–∏ –≤—Å—ñ –≤—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Zod —Å—Ö–µ–º

```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
const result = await db.prepare('SELECT * FROM users WHERE id = ?').bind(userId).first();

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
const result = await db.prepare(`SELECT * FROM users WHERE id = ${userId}`).first();
```

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∞–≥–µ–Ω—Ç—ñ–≤

–í—Å—ñ –∞–≥–µ–Ω—Ç–∏ –ø–æ–≤–∏–Ω–Ω—ñ:

1. –†–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏ `BaseAgent<StateType>`
2. –†–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏:
   - `getDefaultState()`
   - `calculateScore()`
   - `checkHealth()`
3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–∞—Ö–∏—â–µ–Ω—ñ –º–µ—Ç–æ–¥–∏ –±–∞–∑–∏:
   - `sql()`, `sqlAll()`, `sqlExec()`, `sqlBatch()`
   - `getKV()`, `setKV()`
   - `storeFile()`, `getFile()`

```typescript
export class MyAgent extends BaseAgent<MyState> {
  protected getDefaultState(): MyState {
    return {
      initialized: false,
      // ...
    };
  }

  protected async calculateScore(): Promise<number> {
    // Implementation
  }

  public async checkHealth(): Promise<HealthStatus> {
    // Implementation
  }
}
```

### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

- –û–±–≥–æ—Ä—Ç–∞—Ç–∏ async –æ–ø–µ—Ä–∞—Ü—ñ—ó –≤ try/catch
- –õ–æ–≥—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏ —á–µ—Ä–µ–∑ console.error
- –ü–æ–≤–µ—Ä—Ç–∞—Ç–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–¥–∏ –ø–æ–º–∏–ª–æ–∫ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤

```typescript
try {
  const result = await operation();
  return c.json({ success: true, data: result });
} catch (error) {
  console.error('Operation failed:', error);
  return c.json(
    {
      error: MESSAGES.ERROR_GENERIC,
      code: ERROR_CODES.OPERATION_FAILED,
      correlationId: c.get('correlationId')
    },
    { status: 500 }
  );
}
```

## Pull Request –ø—Ä–æ—Ü–µ—Å

### 1. –°—Ç–≤–æ—Ä–∏—Ç–∏ –≥—ñ–ª–∫—É

```bash
git checkout -b feature/my-feature
# –∞–±–æ
git checkout -b fix/my-bugfix
```

### 2. –í–Ω–µ—Å—Ç–∏ –∑–º—ñ–Ω–∏

- –î–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—è —Å—Ç–∏–ª—é –∫–æ–¥—É
- –î–æ–¥–∞—Ç–∏ —Ç–µ—Å—Ç–∏
- –û–Ω–æ–≤–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–∏–ø–∏: `npm run types`

### 3. –°—Ç–≤–æ—Ä–∏—Ç–∏ Pull Request

- –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —à–∞–±–ª–æ–Ω PR (—è–∫—â–æ —î)
- –ß—ñ—Ç–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞ –æ–ø–∏—Å
- –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ issue (—è–∫—â–æ —î)
- –î–æ–¥–∞—Ç–∏ —Å–∫—Ä—ñ–Ω—à–æ—Ç–∏ (–¥–ª—è UI –∑–º—ñ–Ω)

### 4. Code Review

- –í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –Ω–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ
- –í–Ω–µ—Å—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–∏
- –î–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—è –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–≥–æ —Ç–æ–Ω—É

### 5. Merge

- –ü—ñ—Å–ª—è —Å—Ö–≤–∞–ª–µ–Ω–Ω—è –≤–∞—à PR –±—É–¥–µ –∑–º–µ—Ä–¥–∂–µ–Ω–∏–π
- –í–∏–¥–∞–ª–∏—Ç–∏ feature –≥—ñ–ª–∫—É

## –ó–≤—ñ—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ [GitHub Issues](https://github.com/Ihorog/cimeika-backend/issues) –¥–ª—è –∑–≤—ñ—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏.

### –©–æ –≤–∫–ª—é—á–∏—Ç–∏:

- **–û–ø–∏—Å:** –ß—ñ—Ç–∫–∏–π –æ–ø–∏—Å –ø—Ä–æ–±–ª–µ–º–∏
- **–ö—Ä–æ–∫–∏ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è:** –Ø–∫ –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ–º–∏–ª–∫—É
- **–û—á—ñ–∫—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞:** –©–æ –º–∞—î –≤—ñ–¥–±—É—Ç–∏—Å—è
- **–§–∞–∫—Ç–∏—á–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞:** –©–æ –≤—ñ–¥–±—É–ª–æ—Å—è
- **–°–µ—Ä–µ–¥–æ–≤–∏—â–µ:** OS, Node –≤–µ—Ä—Å—ñ—è, —Ç–æ—â–æ
- **–õ–æ–≥–∏:** –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ –ª–æ–≥–∏ –ø–æ–º–∏–ª–æ–∫

## –ó–∞–ø–∏—Ç –Ω–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ [GitHub Issues](https://github.com/Ihorog/cimeika-backend/issues) –∑ –º—ñ—Ç–∫–æ—é `enhancement`.

### –©–æ –≤–∫–ª—é—á–∏—Ç–∏:

- **–û–ø–∏—Å:** –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ
- **–ú–æ—Ç–∏–≤–∞—Ü—ñ—è:** –ß–æ–º—É —Ü–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏:** –†–æ–∑–≥–ª—è–Ω—É—Ç—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏
- **–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:** Mockups, –ø—Ä–∏–∫–ª–∞–¥–∏

## –ü–∏—Ç–∞–Ω–Ω—è —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

- **Email:** cimeika.com.ua@gmail.com –∞–±–æ iglu963@gmail.com
- **GitHub Discussions:** (—è–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ)
- **Issues:** –î–ª—è —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –ø–∏—Ç–∞–Ω—å

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

–†–æ–±–ª—è—á–∏ –≤–Ω–µ—Å–æ–∫ —É —Ü–µ–π –ø—Ä–æ—î–∫—Ç, –≤–∏ –ø–æ–≥–æ–¥–∂—É—î—Ç–µ—Å—è, —â–æ –≤–∞—à—ñ –≤–Ω–µ—Å–∫–∏ –±—É–¥—É—Ç—å –ª—ñ—Ü–µ–Ω–∑–æ–≤–∞–Ω—ñ –ø—ñ–¥ MIT –ª—ñ—Ü–µ–Ω–∑—ñ—î—é.

---

**–î—è–∫—É—î–º–æ –∑–∞ –≤–∞—à –≤–Ω–µ—Å–æ–∫ —É –ø—Ä–æ—î–∫—Ç CIMEIKA!** üéâ
